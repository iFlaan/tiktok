<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ù„ÙŠÙ„ ØªÙŠÙƒ ØªÙˆÙƒ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</title>
    <style>
        :root {
            --primary: #25F4EE;
            --secondary: #FE2C55;
            --dark: #121212;
            --light: #f8f9fa;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--dark);
            color: white;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .container {
            text-align: center;
        }
        .profile-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: right;
        }
        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }
        .profile-pic {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--primary);
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
        }
        .section-title {
            color: var(--primary);
            border-bottom: 1px solid var(--primary);
            padding-bottom: 5px;
        }
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        .data-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 5px;
        }
        .data-label {
            font-size: 0.8em;
            color: var(--primary);
        }
        .data-value {
            font-weight: bold;
            word-break: break-all;
        }
        pre {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            max-height: 300px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="color: var(--primary);">ğŸ›  ØªØ­Ù„ÙŠÙ„ ØªÙŠÙƒ ØªÙˆÙƒ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</h1>
        <form id="statsForm">
            <input type="text" name="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø¯ÙˆÙ† @" required>
            <button type="submit">Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
        </form>
        <div id="result"></div>
    </div>

    <script>
        document.getElementById('statsForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = e.target.username.value.trim();
            if (!username) return;
            
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<p style="text-align:center">Ø¬Ø§Ø±ÙŠ Ø¬Ù…Ø¹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>';
            
            try {
                const response = await fetch('/get_full_stats', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `username=${encodeURIComponent(username)}`
                });
                
                const data = await response.json();
                
                if (data.error) {
                    resultDiv.innerHTML = `<div class="error">${data.error}</div>`;
                    return;
                }
                
                // Ø¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                let html = `
                    <div class="profile-card">
                        <div class="profile-header">
                            <img src="${data.avatar}" class="profile-pic">
                            <div>
                                <h2>${data.name}</h2>
                                <h3>${data.username}</h3>
                                ${data.verified ? '<span style="color: var(--primary);">âœ“ Ù…ÙˆØ«Ù‘Ù‚</span>' : ''}
                                ${data.private ? '<span style="color: var(--secondary); margin-right: 10px;">ğŸ”’ Ø®Ø§Øµ</span>' : ''}
                            </div>
                        </div>
                        <p class="bio">${data.bio || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</p>
                        ${data.bio_link ? `<a href="${data.bio_link}" target="_blank" style="color: var(--primary);">Ø±Ø§Ø¨Ø· Ø§Ù„Ø¨Ø§ÙŠÙˆ</a>` : ''}
                    </div>
                    
                    <div class="section">
                        <h3 class="section-title">ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h3>
                        <div class="data-grid">
                            <div class="data-item">
                                <div class="data-label">Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙˆÙ†</div>
                                <div class="data-value">${data.followers?.toLocaleString() || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">Ø§Ù„Ù…ØªØ§Ø¨ÙØ¹ÙˆÙ†</div>
                                <div class="data-value">${data.following?.toLocaleString() || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª</div>
                                <div class="data-value">${data.likes?.toLocaleString() || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</div>
                                <div class="data-value">${data.videos?.toLocaleString() || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3 class="section-title">ğŸŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
                        <div class="data-grid">
                            <div class="data-item">
                                <div class="data-label">Ø§Ù„Ø¯ÙˆÙ„Ø©</div>
                                <div class="data-value">${data.location?.country || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">Ø§Ù„Ø±Ù…Ø²</div>
                                <div class="data-value">${data.location?.region || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">Ø§Ù„Ù„ØºØ©</div>
                                <div class="data-value">${data.location?.language || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">Ø§Ù„Ù…ÙˆÙ‚Ø¹</div>
                                <div class="data-value">${data.location?.raw_location || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3 class="section-title">ğŸ†” Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙÙ†ÙŠØ©</h3>
                        <div class="data-grid">
                            <div class="data-item">
                                <div class="data-label">Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</div>
                                <div class="data-value">${data.user_id || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">SEC_UID</div>
                                <div class="data-value">${data.sec_uid || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</div>
                                <div class="data-value">${data.created_at || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3 class="section-title">ğŸ”§ Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</h3>
                        <div class="data-grid">
                            <div class="data-item">
                                <div class="data-label">Ø­Ø³Ø§Ø¨ ØªØ¬Ø§Ø±ÙŠ</div>
                                <div class="data-value">${data.is_commerce ? 'Ù†Ø¹Ù…' : 'Ù„Ø§'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø©</div>
                                <div class="data-value">${data.has_insights ? 'Ù…ØªØ§Ø­Ø©' : 'ØºÙŠØ± Ù…ØªØ§Ø­Ø©'}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3 class="section-title">ğŸ“¦ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø§Ù…</h3>
                        <pre id="rawData"></pre>
                        <button onclick="toggleRawData()" style="margin-top: 10px;">Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡</button>
                    </div>
                `;
                
                resultDiv.innerHTML = html;
                document.getElementById('rawData').textContent = JSON.stringify(data._raw, null, 2);
                
            } catch (error) {
                resultDiv.innerHTML = `<div style="color: var(--secondary);">Ø­Ø¯Ø« Ø®Ø·Ø£: ${error.message}</div>`;
            }
        });

        function toggleRawData() {
            const pre = document.getElementById('rawData');
            pre.style.display = pre.style.display === 'none' ? 'block' : 'none';
        }
    </script>
</body>
</html>
